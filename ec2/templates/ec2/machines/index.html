{% extends "base.html" %}
{% block content%}

<div class="container">

<div class="row row-center va-bottom">
    <div class="col-xs-10">
        <h1>Instance List</h1>
    </div><div class="col-xs-1" >
        <button class="btn btn-primary" data-toggle="modal" data-target="#newInstanceModal">New Instance</a>
    </div>
</div>

<ul class="list-group">
{% for machine in machines %}
<li class="list-group-item">{{machine.name}}<span class="badge {{machine.getstatecolor}}">{{machine.getstate}}</span></li>
{% endfor %}
</ul>
</div>

<!-- modal -->
<div class="modal fade" id="newInstanceModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">New Instance</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" action="{% url 'ec2:launch' %}" method="POST">
                {% csrf_token %}
                    <div class="form-group">
                        <label for="nameField" class="col-xs-2">Name</label>
                        <div class="col-xs-10">
                            <input type="text" class="form-control" name="machine_name" id="machine_name" placeholder="Machine Name" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-2">CPU Core</label>
                        <div class="col-xs-2">
                            <input type="number" class="form-control" min="1" name="cpu_core" id="cpu_core" value="1"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-2">Memory(GB)</label>
                        <div class="col-xs-2">
                            <input type="number" class="form-control" min="1" name="memory" id="memory" value="1"/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <div class="col-xs-10 col-xs-offset-2">
                    <button type="submit" class="btn btn-primary" data-dismiss="modal">Launch</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
var options = {
    backdrop: "static",
    keyboard: false,
    show: false,
    remote: false
}

$("#newInstanceModal").modal(options);
</script>

{% endblock %}
